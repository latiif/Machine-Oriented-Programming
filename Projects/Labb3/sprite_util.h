oid
draw_sprite
(
sprite
*
s
,
int
x
,
int
y,
int
set
)
{
int
i
,
j
,
k
,
width_in_bytes
;
if
(
s
-
>
width 
%
8
==
0
)
width_in_bytes 
=
s
-
>
width 
/
8
;
else
width_in_bytes 
=
s
-
>
width 
/
8
+
1
;
for
(
i 
=
0
;
i 
<
s
-
>
height
;
i
++)
for
(
j 
=
0
;
j 
<
width_in_bytes
;
j
++)
{
unsigned char 
byte 
=
s
-
>
data
[
i 
*
width_in_bytes 
+
j
];
for
(
k 
=
0
;
k 
<
8
;
k
++)
{
if
(
byte 
&
(
1
<<
k
))
pixel
(
8
*
j 
+
k 
+
x + 1
,
i 
+
y + 1
,
set
);